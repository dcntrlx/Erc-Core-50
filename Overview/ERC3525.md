# ERC3525
Created: 2020-12
Description: A "Semi-Fungible Token" standard that combines the qualitative attributes of NFTs (ERC-721) with the quantitative features of fungible tokens (ERC-20).

## Core Concepts

### The Solution: Semi-Fungibility
ERC-3525 introduces a triple-scalar model: `<ID, SLOT, VALUE>`.
1.  **ID**: The unique identifier (like ERC-721).
2.  **SLOT**: The category or attribute. Tokens with the **same SLOT** are fungible with each other.
3.  **VALUE**: The quantity held by the token (like ERC-20 balance).

**Key Capability**: You can transfer **Value** from one Token ID to another Token ID *if* they share the same Slot.

## Methods

### View Functions
```solidity
function valueDecimals() external view returns (uint8);
function balanceOf(uint256 tokenId) external view returns (uint256);
function slotOf(uint256 tokenId) external view returns (uint256);
```
-   **balanceOf(tokenId)**: Returns the *value* contained inside a specific NFT, not the user's balance.
-   **slotOf**: Returns the category of the token.

### Value Transfers
```solidity
// Transfer value between two existing tokens
function transferFrom(uint256 fromTokenId, uint256 toTokenId, uint256 value) external payable;

// Transfer value from a token to an address (creates a new token or adds to existing)
function transferFrom(uint256 fromTokenId, address to, uint256 value) external payable returns (uint256);
```
-   **Token-to-Token**: Moves `value` from `fromTokenId` to `toTokenId`. Reverts if slots mismatch.
-   **Token-to-Address**: Moves `value` from `fromTokenId` to a token owned by `to`. If `to` has no matching token, a new one is minted.

### Approvals
```solidity
function approve(uint256 tokenId, address operator, uint256 value) external payable;
function allowance(uint256 tokenId, address operator) external view returns (uint256);
```
-   Allows an operator to manage a specific amount of *value* from a token, distinct from approving the entire token entity.

## Implementation Details

### The Slot Mechanism
The `SLOT` is the critical component for fungibility.
-   **Example**: A "Bitcoin Bond" and an "Ethereum Bond" have different slots. You cannot transfer value between them.
-   **Example**: Two "Bitcoin Bonds" (same slot) can merge or split their values freely.

### Compatibility
ERC-3525 is fully backward compatible with ERC-721.
-   It looks like an NFT to standard wallets/marketplaces.
-   It behaves like a bank account (with a balance) to ERC-3525 aware apps.

## Nuance & Risks
1.  **Approval Complexity**: There are two layers of approval:
    -   **ERC-721 Approval**: Operator can move the *entire* token (ID).
    -   **ERC-3525 Approval**: Operator can move *value* from the token.
2.  **Slot Management**: If slots are defined poorly (e.g., every token has a unique slot), it degrades to simple ERC-721.
3.  **Fragmentation**: Frequent splitting can result in a user owning hundreds of small "dust" tokens instead of one consolidated balance.

## Summary Comparison
-   **ERC-20**: Value only. No identity.
-   **ERC-721**: Identity only. Value is always "1".
-   **ERC-3525**: Identity + Value. Fungible within the same Slot.
