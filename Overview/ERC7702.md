# ERC7702
Created: 2024-05
Description: A new transaction type that temporarily (for one transaction) or permanently sets the code of an Externally Owned Account (EOA), enabling "Smart Accounts" for everyone without migration.

ERC-7702 introduces a new transaction type that allows an EOA to temporarily adopt the code of a smart contract during execution.
1.  Sign: The user signs a special "Authorization Tuple" saying "I want to use the code at address X".
2.  Execute: The transaction includes this authorization.
3.  Delegate: For the duration of the transaction, the EOA behaves exactly like the smart contract at address X.
4.  Revert: After the transaction, the EOA returns to being a normal EOA (unless the code was set permanently).

## Methods

### Transaction Structure
The new transaction type includes an `authorization_list`:
```
[chain_id, address, nonce, y_parity, r, s]
```
-   address: The address of the smart contract code to "borrow".
-   nonce: The EOA's nonce (prevents replay).
-   signature: Proof that the EOA owner authorized this code.

### Delegation Indicator
When the transaction executes, the EOA's code is temporarily set to a special pointer:
`0xef0100 || address`
This tells the EVM: "When you execute this account, actually run the code at `address`".

## Implementation Details

### The Flow
1.  User wants to batch 3 swaps.
2.  User signs an authorization for a "BatchExecutor" contract.
3.  Relayer submits the transaction with the authorization.
4.  EVM sees the authorization, sets the EOA's code to point to "BatchExecutor".
5.  EVM calls the EOA. The EOA runs "BatchExecutor" code, which executes the 3 swaps.
6.  End: The EOA's code is cleared (or persists if designed to).

### Storage
The EOA retains its own storage. If the "borrowed" code writes to storage (e.g., setting a daily limit), that data stays in the EOA's storage slots. This effectively upgrades the EOA to a full smart account.