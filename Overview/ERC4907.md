# [ERC4907](https://eips.ethereum.org/EIPS/eip-4907)
**Created**: 2022-03-11
**Link to the standard**: 
**Description**:
- Adds a time-limited "User" role to ERC-721 tokens.
- Enables trustless rentals without collateral or wrapping.
- Automatically expires usage rights without a second transaction.

**Motivation**: To separate "Ownership" (holding the asset) from "Usage" (playing the game, accessing the content), enabling a secure and gas-efficient rental market.

## Core Concept: Rentable Utility NFTs
Before ERC4907, renting an NFT required either:
1.  **Collateral**: The renter puts up 110% of the value (capital inefficient).
2.  **Wrapping**: Creating a new token (complex and breaks composability).

ERC4907 solves this by adding a "Guest Pass" to the NFT. The Owner keeps the NFT, but the "User" gets the utility for a fixed time.

### The Interface
A contract compliant with ERC4907 must implement the following interface:

```solidity
interface IERC4907 {
    // Emitted when the user or expires is changed
    event UpdateUser(uint256 indexed tokenId, address indexed user, uint64 expires);

    // Sets the user and expires of an NFT
    function setUser(uint256 tokenId, address user, uint64 expires) external;

    // Returns the user address for an NFT
    function userOf(uint256 tokenId) external view returns (address);

    // Returns the user expires for an NFT
    function userExpires(uint256 tokenId) external view returns (uint256);
}
```

## Implementation Details

### 1. The `setUser` Function
- Only the Owner or an Approved Operator can call it
- It Updates the `user` address and the `expires` timestamp.
- It's a single transaction to start the rental. No transaction is needed to end it, which is gas safely

### 2. The `userOf` Function
- Logic:
    ```solidity
    if (block.timestamp > expires) {
        return address(0); // Rental expired
    }
    return user; // Rental active
    ```
> **Automatic Expiration**: This "lazy check" means the user's rights vanish instantly when the time is up, without spending any gas.

### 3. Events (`UpdateUser`)
- Critical for indexing. Marketplaces can listen to this event to show "Rented until [Date]" badges.
