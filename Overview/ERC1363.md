# ERC1363
Created: 2018-08
Description: An extension of ERC-20 that adds "Transfer and Call" functionality. It allows tokens to be transferred to a smart contract and trigger a specific function in that destination contract within a single transaction. It solves ERC20 2 transactions

## Methods

### Token Methods

1. transferAndCall
   ```solidity
   function transferAndCall(address to, uint256 value) external returns (bool);
   function transferAndCall(address to, uint256 value, bytes memory data) external returns (bool);
   ```
   Transfers tokens to to and then calls onTransferReceived on the receiver.
   Returns true unless throwing.

2. transferFromAndCall
   ```solidity
   function transferFromAndCall(address from, address to, uint256 value) external returns (bool);
   function transferFromAndCall(address from, address to, uint256 value, bytes memory data) external returns (bool);
   ```
   Transfers tokens from from to to and then calls onTransferReceived on the receiver.
   Returns true unless throwing.
    The token must verify the receiver returns the correct magic value (selector). If the receiver returns anything else, the transaction reverts. This prevents tokens from getting stuck in incompatible contracts.

3. approveAndCall
   ```solidity
   function approveAndCall(address spender, uint256 value) external returns (bool);
   function approveAndCall(address spender, uint256 value, bytes memory data) external returns (bool);
   ```
   Approves spender to spend value and then calls onApprovalReceived on the spender.
   Returns true unless throwing.
   The token must verify the spender returns the correct magic value (selector). If the spender returns anything else, the transaction reverts. This prevents tokens from getting stuck in incompatible contracts.

### Receiver Interfaces

1. onTransferReceived
   ```solidity
   function onTransferReceived(address operator, address from, uint256 value, bytes memory data) external returns (bytes4);
   ```
   Called by the token contract after a transfer or transferFrom.
   MUST return `bytes4(keccak256("onTransferReceived(address,address,uint256,bytes)"))` to accept.
   Any other return value or revert rejects the transfer.

2. onApprovalReceived
   ```solidity
   function onApprovalReceived(address owner, uint256 value, bytes memory data) external returns (bytes4);
   ```
   Called by the token contract after an approve.
   MUST return `bytes4(keccak256("onApprovalReceived(address,uint256,bytes)"))` to accept.

## Risk
1. Reentrancy Risk: transferAndCall hands control to the receiver. (NOt typical reentrancy, but an attacker can attack using malicious receiver)

## Alternatives
ERC-20: 2 Txs (Approve + Call)
ERC-1363: 1 Tx (Transfer + Call)
ERC-2612: 1 Tx (Permit + Call)
