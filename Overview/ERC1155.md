# ERC-1155: Multi Token Standard
**Source:** [EIP-1155](https://eips.ethereum.org/EIPS/eip-1155)

## Summary
A standard for contracts managing multiple token types (Fungible, NFT, Semi-Fungible) in a single contract.

## Key Features
1.  **Multi-Token:** One contract can manage thousands of different tokens.
    -   **Mechanism:** Uses a `uint256 id` to distinguish token types.
    -   **Storage:** Typically uses a mapping like `mapping(uint256 => mapping(address => uint256)) balances` (Token ID -> Owner -> Balance).
    -   **Flexibility:**
        -   If supply is `1` (and unique): Acts like an NFT (ERC-721).
        -   If supply is `>1`: Acts like a Fungible Token (ERC-20).
    -   **Collections:** Unlike ERC-721 where the *contract* is the collection, in ERC-1155 the *contract* holds many different items. Thus there are no collections in ERC-1155. Each `id` is a separate token type. You can logically group IDs (e.g. 1-100) to sim—ãulate collections, but the standard treats them independently.
    -   **Scope:** Manages only tokens created *within* this contract. It cannot directly manage or transfer tokens from other external ERC-20 or ERC-721 contracts.
2.  **Batch Operations:**
    -   **Functions:**
        -   `safeBatchTransferFrom`: Transfer multiple token types (ids) and amounts in a single transaction.
        -   `balanceOfBatch`: Query balances for multiple accounts and token ids in a single call.
    -   **Gas Efficiency:** Significantly reduces gas costs by bundling multiple operations. Overhead (transaction base fee, signature verification) is paid once. State updates and event emissions are consolidated.
    -   **Atomicity:** Operations are atomic. If any single transfer within the batch fails (e.g., insufficient balance), the entire batch reverts. This ensures the contract state remains consistent.
    -   **UX & Network:** Reduces the number of transactions a user needs to sign and submit, lowering network congestion.
3.  **Efficiency:** Reduces gas costs and bytecode by avoiding separate contracts per token.
4.  **Safe Transfers:** Requires recipient contracts to implement `onERC1155Received` hooks.

## Interfaces

### Core (IERC1155)
*Inherits from [ERC-165](https://eips.ethereum.org/EIPS/eip-165)*

```solidity
interface IERC1155 {
    // Events
    event TransferSingle(address indexed operator, address indexed from, address indexed to, uint256 id, uint256 value);
    event TransferBatch(address indexed operator, address indexed from, address indexed to, uint256[] ids, uint256[] values);
    event ApprovalForAll(address indexed account, address indexed operator, bool approved);
    event URI(string value, uint256 indexed id);

    // Functions
    function balanceOf(address account, uint256 id) external view returns (uint256);
    function balanceOfBatch(address[] calldata accounts, uint256[] calldata ids) external view returns (uint256[] memory);
    function setApprovalForAll(address operator, bool approved) external;
    function isApprovedForAll(address account, address operator) external view returns (bool);
    function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes calldata data) external;
    function safeBatchTransferFrom(address from, address to, uint256[] calldata ids, uint256[] calldata amounts, bytes calldata data) external;
}
```

### Metadata Extension (IERC1155Metadata_URI)
*Optional but recommended*

```solidity
interface IERC1155Metadata_URI {
    function uri(uint256 id) external view returns (string memory);
}
```

Unlike ERC-721 which often stores a unique URI for every token, ERC-1155 relies on a **substitution mechanism** to save gas.
1.  **Template URI:** The contract typically returns a single string containing the substring `{id}`.
2.  **Client Substitution:** Clients (wallets, marketplaces) are responsible for replacing `{id}` with the **lowercase hexadecimal** representation of the token ID.
    -   The hex string must be 64 characters long (32 bytes), left-padded with zeros.
    -   It must NOT include the `0x` prefix.

**Example:**
-   **Contract returns:** `https://api.game.com/items/{id}.json`
-   **Token ID:** `5`
-   **Hex Representation:** `0000000000000000000000000000000000000000000000000000000000000005`
-   **Final URL:** `https://api.game.com/items/0000000000000000000000000000000000000000000000000000000000000005.json`
