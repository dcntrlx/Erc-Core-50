# ERC5643
Created: 2022-09
Description: A standard interface for subscription-based NFTs (timelimitied NFTs), allowing expiration management and recurring revenue models directly on-chain.

## Core Concepts

### The Problem: Manual Subscriptions
Recurring payments in crypto are difficult because "pull payments" (charging a user's wallet automatically) are not natively supported. Most subscriptions rely on off-chain databases to track who has paid and when access expires.

### The Solution: Expiration Metadata
ERC-5643 embeds the subscription logic into the NFT itself.
1.  **Expiration**: The NFT has an `expiresAt` timestamp.
2.  **Renewal**: Users (or anyone) can call `renewSubscription` to extend the timestamp by paying.
3.  **Access Control**: Services check `expiresAt > block.timestamp` to grant access.

## Methods

### Subscription Management
```solidity
function renewSubscription(uint256 tokenId, uint64 duration) external payable;
function cancelSubscription(uint256 tokenId) external payable;
```
-   **renewSubscription**: Extends the expiration date by `duration` seconds. Usually requires payment (ETH/Tokens).
-   **cancelSubscription**: Cancels the subscription (often by setting expiration to 0).

### Views
```solidity
function expiresAt(uint256 tokenId) external view returns (uint64);
function isRenewable(uint256 tokenId) external view returns (bool);
```
-   **expiresAt**: Returns the timestamp when the subscription ends.
-   **isRenewable**: Checks if the subscription can currently be renewed (e.g., it might be discontinued).

## Implementation Details

### Simple Storage
The implementation is typically a mapping: `mapping(uint256 => uint64) _expirations`.
-   If `currentExpiration == 0` (or past), the subscription is inactive.
-   Renewal logic: `newExpiration = max(currentExpiration, block.timestamp) + duration`.

### Events
```solidity
event SubscriptionUpdate(uint256 indexed tokenId, uint64 expiration);
```
-   Emitted on renewal or cancellation. Indexers use this to track active subscribers.

## Risks
This is still a "Push" model. The user must actively sign a transaction to renew. It is not an auto-debit system like a credit card.
Transferability: If the NFT is transferred, the subscription (and remaining time) goes with it. This creates a secondary market for "pre-paid accounts".
Users can pay for 10 years in advance. If the service shuts down, the money is already in the contract (and likely withdrawn by the owner).
